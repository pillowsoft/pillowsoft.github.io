$.ajaxSetup({cache:!1}),function(e){e.fn.slideFade=function(){for(var e,t=0;t<arguments.length;t++)if("number"==typeof arguments[t])e=arguments[t];else var a=arguments[t];e||(e=500),this.animate({opacity:"toggle",height:"toggle"},e,function(){"function"!=typeof a&&(a=function(){}),a.call(this)})}}(jQuery),function(e){e.fn.plusGallery=function(t){var a=this;if(0===a.length)return!1;var o={imagePath:"images/plusgallery",type:"google",albumTitle:!1,albumLimit:16,limit:30,apiKey:"",exclude:null,include:null,imgArray:[],titleArray:[],t:"",idx:0,imgCount:0,imgTotal:0,winWidth:1024,touch:!1,titleText:"",init:function(){var t=e(document);"ontouchstart"in document.documentElement&&(window.scrollTo(0,1),o.touch=!0),o.winWidth=e(window).width(),e("#pgzoomview").remove(),t.off("click",".pgalbumlink, #pgthumbhome, .pgthumb, .pgzoomarrow, .pgzoomclose, #pgzoomview, #pgzoomslide, .pgzoomimg"),o.getDataAttr(),o.writeHTML(),null!==o.albumId||"instagram"==o.type?o.loadSingleAlbum():o.loadAlbumData(),t.on("click",".pgalbumlink",function(t){t.preventDefault(),e(this).append('<span class="pgloading"></span>');var a=this.href,i=e(this).children("span").html();o.loadGallery(a,i)}),t.on("click","#pgthumbhome",function(t){t.preventDefault(),e("#pgthumbview").slideFade(700),e("#pgalbums").slideFade(700)}),t.on("click",".pgthumb",function(t){t.preventDefault();var a=e(".pgthumb").index(this);o.loadZoom(a)}),t.on("click",".pgzoomarrow",function(e){e.preventDefault();var t=this.rel;return o.prevNext(t),!1}),t.on("click",".pgzoomclose",function(e){e.preventDefault(),o.unloadZoom()}),t.on("click","#pgzoomview",function(e){e.preventDefault(),o.unloadZoom()}),t.on("click","#pgzoomslide",function(){o.unloadZoom()}),t.on("click",".pgzoomimg",function(){return!1}),clearTimeout(o.t)},getDataAttr:function(){a.attr("data-userid");var e=a.attr("data-userid");return e?(o.userId=e,(e=a.attr("data-type"))?(o.type=e,e=a.attr("data-limit"),e&&(o.limit=e),e=a.attr("data-album-limit"),e&&(o.albumLimit=e),e=a.attr("data-exclude"),e&&(o.exclude=e.split(",")),e=a.attr("data-include"),e&&(o.include=e.split(",")),e=a.attr("data-api-key"),e&&(o.apiKey=e),e=a.attr("data-access-token"),e&&(o.accessToken=e),e=a.attr("data-album-id"),e?(o.albumId=e,titleAttr=a.attr("data-album-title"),o.albumTitle="true"==titleAttr?!0:!1):(o.albumTitle=!0,o.albumId=null),e=a.attr("data-credit"),o.credit="false"==e?!1:!0,e=a.attr("data-image-path"),e&&(o.imagePath=e),void 0):(alert("You must enter a data type."),!1)):(alert("You must enter a valid User ID"),!1)},writeHTML:function(){var t;o.touch?(t="touch",a.addClass("touch")):(t="no-touch",a.addClass("no-touch")),a.append('<ul id="pgalbums" class="clearfix"></ul><div id="pgthumbview"><ul id="pgthumbs" class="clearfix"></ul></div>'),e("body").prepend('<div id="pgzoomview" class="pg '+t+'"><a href="#" rel="previous" id="pgzoomclose" title="Close">Close</a><a href="#" rel="previous" id="pgprevious" class="pgzoomarrow" title="previous">Previous</a><a href="#" rel="next" id="pgnext" class="pgzoomarrow" title="Next">Next</a><div id="pgzoomscroll"><ul id="pgzoom"></ul></div></div>'),a.addClass("pg"),o.credit===!0&&a.append('<div id="pgcredit"><a href="http://www.plusgallery.net" target="_blank" title="Powered by +GALLERY"><span>+</span>Gallery</a></div>'),o.albumTitle===!0&&e("#pgthumbview").prepend('<ul id="pgthumbcrumbs" class="clearfix"><li id="pgthumbhome">&laquo;</li></ul>')},loadAlbumData:function(){var t;switch(o.type){case"google":t="https://picasaweb.google.com/data/feed/base/user/"+o.userId+"?alt=json&kind=album&hl=en_US&max-results="+o.albumLimit+"&callback=?";break;case"flickr":t="http://api.flickr.com/services/rest/?&method=flickr.photosets.getList&api_key="+o.apiKey+"&user_id="+o.userId+"&format=json&jsoncallback=?";break;case"facebook":t="https://graph.facebook.com/"+o.userId+"/albums?limit="+o.albumLimit+"&access_token="+o.accessToken+"&callback=?";break;case"instagram":t=null;break;default:alert("Please define a gallery type.")}e.getJSON(t,function(i){a.addClass("loaded");var l,r,s,n,c,m;switch(o.type){case"google":l=i.feed.entry,s=l.length,s>o.albumLimit&&(s=o.albumLimit),r=[],s>0&&(null!==o.include&&e.each(o.include,function(t,a){e.each(l,function(e,t){s>e&&(m=t.link[0].href,m.indexOf(a)>0&&r.push(t))})}),l=r),s>0?e.each(l,function(e,t){s>e&&(c=t.title.$t,m=t.link[0].href,n=t.media$group.media$thumbnail[0].url,n=n.replace("s160","s210"),o.loadAlbums(c,n,m,e))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+m);break;case"flickr":l=i.photosets.photoset,s=l.length,s>o.albumLimit&&(s=o.albumLimit),s>0?e.each(l,function(e,t){s>e&&(c=t.title._content,n="http://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.primary+"_"+t.secret+"_n.jpg",m="http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+o.apiKey+"&photoset_id="+t.id+"=&format=json&jsoncallback=?",o.loadAlbums(c,n,m))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+m);break;case"facebook":l=i.data,s=l.length,s>o.albumLimit&&(s=o.albumLimit),s>0?e.each(l,function(e,t){s>e&&(c=t.name,m="https://graph.facebook.com/"+t.id+"/photos?limit="+o.limit+"&access_token="+o.accessToken,n="http://graph.facebook.com/"+t.id+"/picture?type=album",o.loadAlbums(c,n,m))}):alert("There are either no results for albums with this user ID or there was an error loading the data. \n"+t)}})},loadAlbums:function(t,a,i){var l,r=!0;null!==o.exclude&&e.each(o.exclude,function(e,t){i.indexOf(t)>0&&(r=!1)}),null!==o.include&&(r=!1,e.each(o.include,function(e,t){i.indexOf(t)>0&&(r=!0)})),r&&(l="facebook"==o.type||"flickr"==o.type?'<img src="'+o.imagePath+'/square.png" style="background-image: url('+a+');" title="'+t+'" title="'+t+'" class="pgalbumimg">':'<img src="'+a+'" title="'+t+'" title="'+t+'" class="pgalbumimg">',e("#pgalbums").append('<li class="pgalbumthumb"><a href="'+i+'" class="pgalbumlink">'+l+'<span class="pgalbumtitle">'+t+'</span><span class="pgplus">+</span></a></li>'))},loadSingleAlbum:function(){var t;switch(o.type){case"google":t="https://picasaweb.google.com/data/feed/base/user/"+o.userId+"/albumid/"+o.albumId+"?alt=json&hl=en_US";break;case"flickr":t="http://api.flickr.com/services/rest/?&method=flickr.photosets.getPhotos&api_key="+o.apiKey+"&photoset_id="+o.albumId+"=&format=json&jsoncallback=?";break;case"facebook":t="https://graph.facebook.com/"+o.albumId+"/photos?limit="+o.limit+"&access_token="+o.accessToken;break;case"instagram":t="https://api.instagram.com/v1/users/"+o.userId+"/media/recent/?access_token="+o.accessToken+"&count="+o.limit}o.loadGallery(t),a.addClass("loaded"),e("#pgthumbhome").hide()},loadGallery:function(t,a){var i,l,r,s,n,c="",m=0;o.imgArray=[],o.titleArray=[],e("#pgzoom").empty(),e.ajax({url:t,cache:!1,dataType:"jsonp",success:function(t){switch(e(".crumbtitle").remove(),e("#pgthumbs").empty(),void 0===a&&(a="&nbsp;"),e("#pgthumbcrumbs").append('<li class="crumbtitle">'+a+"</li>"),o.type){case"google":objPath=t.feed.entry;break;case"flickr":objPath=t.photoset.photo;break;case"facebook":objPath=t.data;break;case"instagram":objPath=t.data}o.imgTotal=objPath.length,o.limit<o.imgTotal&&(o.imgTotal=o.limit),0===o.imgTotal&&alert("Please check your photo permissions,\nor make sure there are photos in this gallery."),o.winWidth>1100?(s=1024,n="_b"):o.winWidth>620?(s=768,n="_b"):(s=540,n="_z"),e.each(objPath,function(t,a){if(t<o.limit){switch(o.type){case"google":i=a.title.$t;var u=/\.(jpg|png|gif)$/gi.test(i);u&&(i=""),l=a.media$group.media$content[0].url;var d=l.lastIndexOf("/"),p=l.substring(d);l=l.replace(p,"/s"+s+p),r=a.media$group.media$thumbnail[1].url,r=r.replace("s144","s160-c");break;case"flickr":i=a.title,l="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+n+".jpg",r="http://farm"+a.farm+".staticflickr.com/"+a.server+"/"+a.id+"_"+a.secret+"_q.jpg";break;case"facebook":i=a.name,l=a.images[1].source,r=o.imagePath+"/square.png",c=' style="background: url('+a.images[3].source+') no-repeat 50% 50%; background-size: cover;"';break;case"instagram":null!==a.caption&&(i=a.caption.text),l=a.images.standard_resolution.url,r=a.images.low_resolution.url}i||(i=""),o.imgArray[t]=l,o.titleArray[t]=i,e("#pgthumbs").append('<li class="pgthumb"><a href="'+l+'"><img src="'+r+'" id="pgthumbimg'+t+'" class="pgthumbimg" alt="'+i+'" title="'+i+'"'+c+"></a></li>"),e("#pgthumbimg"+t).load(function(){m++,m==o.imgTotal&&(e("#pgalbums").slideFade(700,function(){e(".pgalbumthumb .pgloading").remove()}),e("#pgthumbview").slideFade(700))})}})},error:function(e,t,a){console.log("Error: \njqXHR:"+e+"\ntextStatus: "+t+"\nerrorThrown: "+a)}})},zoomIdx:null,zoomImagesLoaded:[],zoomScrollDir:null,zoomScrollLeft:0,loadZoom:function(t){o.zoomIdx=t,o.winWidth=e(window).width();var a=e("#pgzoomview"),i=(e("#pgzoomscroll"),e("#pgprevious")),l=e("#pgnext"),r=(e("#pgzoom"),""),s=o.imgArray.length;a.addClass("fixed"),0===t&&i.hide(),t==s-1&&l.hide();var n=o.imgArray.length*o.winWidth;e("#pgzoom").width(n);var c=parseInt(t*o.winWidth);a.fadeIn(function(){e(window).on("resize",o.resizeZoom),e.each(o.imgArray,function(a){r=r+'<li class="pgzoomslide loading" id="pgzoomslide'+a+'" style="width: '+o.winWidth+'px;"><div class="pgzoomspacer"></div><span class="pgzoomcaption">'+o.titleArray[a]+"</span></li>",a+1==o.imgArray.length&&(e("#pgzoom").html(r),o.zoomKeyPress(),e("#pgzoomscroll").scrollLeft(c),o.zoomScrollLeft=c,o.loadZoomImg(t),o.zoomScroll(),t-1>=0&&o.loadZoomImg(t-1),t+1<o.imgArray.length&&o.loadZoomImg(t+1))})})},loadZoomImg:function(t){0===e("#pgzoomimg"+t).length&&(e("#pgzoomslide"+t+" .pgzoomspacer").after('<img src="'+o.imgArray[t]+'" data-src="'+o.imgArray[t]+'" title="'+o.titleArray[t]+'" alt="'+o.titleArray[t]+'" id="pgzoomimg'+t+'" class="pgzoomimg">'),e("#pgzoomimg"+t).load(function(){e(this).addClass("active")}))},zoomScroll:function(){var t,a=e("#pgprevious"),i=e("#pgnext"),l=!0;e("#pgzoomscroll").on("scroll",function(){currentScrollLeft=e(this).scrollLeft(),l===!0&&(l=!1,t=setTimeout(function(){if(0===currentScrollLeft?a.fadeOut():a.fadeIn(),currentScrollLeft>=(o.imgTotal-1)*o.winWidth?i.fadeOut():i.fadeIn(),currentScrollLeft%o.zoomScrollLeft>20||currentScrollLeft>0&&0===o.zoomScrollLeft){o.zoomScrollLeft=currentScrollLeft;var e=o.zoomScrollLeft/o.winWidth,t=Math.ceil(e),r=Math.floor(e);o.zoomImagesLoaded[t]||o.loadZoomImg(t),o.zoomImagesLoaded[r]||o.loadZoomImg(r)}l=!0},200))})},zoomKeyPress:function(){e(document).on("keyup","body",function(e){27==e.which?o.unloadZoom():37==e.which?o.prevNext("previous"):39==e.which&&o.prevNext("next")})},resizeZoom:function(){o.winWidth=e(window).width();var t=o.imgArray.length*o.winWidth;e("#pgzoom").width(t),e(".pgzoomslide").width(o.winWidth);var a=parseInt(o.zoomIdx*o.winWidth);e("#pgzoomscroll").scrollLeft(a)},unloadZoom:function(){e(document).off("keyup","body"),e(window).off("resize",o.resizeZoom),e("#pgzoomscroll").off("scroll"),e("#pgzoomview").fadeOut(function(){e("#pgzoom").empty(),e("#pgzoomview").off("keyup"),e("#pgzoomview").removeClass("fixed")})},prevNext:function(t){var a=e("#pgzoomscroll").scrollLeft()/o.winWidth;o.zoomIdx="previous"==t?Math.round(a)-1:Math.round(a)+1;var i=o.zoomIdx*o.winWidth;e("#pgzoomscroll").stop().animate({scrollLeft:i})}};e.extend(o,t),o.init()}}(jQuery);